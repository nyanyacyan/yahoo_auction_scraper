import sys
import os
import logging

# --------------------------------------------------------------
# プロジェクトルートのパスをsys.pathへ追加
# これにより、プロジェクト内のどこからでも
# installer/src/flow/main_flow.py のMainFlow, Configクラスをimportできる
# --------------------------------------------------------------
sys.path.insert(
    0,  # 先頭に挿入：優先的にこのパスからモジュール検索
    os.path.abspath(os.path.join(os.path.dirname(__file__), "..", ".."))
)

# --------------------------------------------------------------
# Yahoo!オークション落札済み商品の情報収集フローの本体をimport
# MainFlow：情報収集フローの制御クラス
# Config  ：設定情報を保持するクラス
# --------------------------------------------------------------
from installer.src.flow.main_flow import MainFlow, Config

# --------------------------------------------------------------
# ログ出力の設定（INFO以上をコンソールに出力）
# 開発・運用時のデバッグや状況把握に利用
# --------------------------------------------------------------
logging.basicConfig(level=logging.INFO)

def main():
    """
    Yahoo!オークション落札済み商品情報の
    収集フローを起動するエントリーポイント関数
    """
    # 設定情報の取得（Configインスタンス生成）
    config = Config()
    # 情報収集フローのインスタンス生成
    flow = MainFlow(config)
    # 情報収集フローを実行
    flow.run()

# --------------------------------------------------------------
# このスクリプトが「直接」実行されたときだけmain()を呼び出す
# （importされた場合には実行されない）
# --------------------------------------------------------------
if __name__ == "__main__":
    main()